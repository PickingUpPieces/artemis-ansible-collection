{{ ansible_managed | comment }}

# Common configuration shared between all applications
configserver:
  name: Artemis JHipster Registry
  status: Connected to the Artemis JHipster Registry

jhipster:
  security:
    authentication:
      jwt:
        secret: ''
        base64-secret: {{ registry_application_jwt }}

eureka:
  instance:
    prefer-ip-address: true
    ip-address: "[{{ wireguard_interface_address }}]"
    instanceId: {{ registry_instance_id }}
  server:
    enable-self-preservation: false
    registry-sync-retry-wait-ms: 500
    a-sgcache-expiry-timeout-ms: 60000
    eviction-interval-timer-in-ms: 30000
    peer-eureka-nodes-update-interval-ms: 30000
    renewal-threshold-update-interval-ms: 15000
  # The registry can register itself to a second registry and replicate the data. We do, however, currently not use this setup.
  # Uncomment the following lines to enable.
  #client:
  #  fetch-registry: true
  #  register-with-eureka: true
  #  serviceUrl:
  #    defaultZone: http://admin:{{ registry_application_prod_registry_password }}@{% if broker_host_role == 'primary' %}-- broker_backup_host --{% else %}{{ broker_primary_host }}{% endif %}:8761/eureka/
